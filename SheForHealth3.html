<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDORA | Holistic Women's Wellness</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --baby-pink: #ffdae9;
            --soft-pink: #fce4ec;
            --deep-pink: #f06292;
            --medora-sage: #4a6741;
            --medora-blue: #64b5f6;
        }

        body { 
            background-color: var(--baby-pink); 
            font-family: 'Poppins', sans-serif; 
            color: #444; 
            overflow-x: hidden; 
        }

        h1, h2, h3, .navbar-brand { 
            font-family: 'Playfair Display', serif; 
            color: var(--deep-pink); 
        }

        .navbar { background: white; border-bottom: 3px solid var(--deep-pink); }
        .nav-link { color: var(--deep-pink) !important; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .nav-link:hover { color: var(--medora-sage) !important; transform: translateY(-2px); }

        .medora-card {
            background: white; border-radius: 30px; padding: 30px;
            box-shadow: 0 10px 20px rgba(240, 98, 146, 0.15);
            margin-bottom: 25px; border: none; transition: 0.3s;
        }

        .tracker-circle {
            width: 130px; height: 130px; border-radius: 50%;
            border: 8px solid var(--soft-pink); display: flex;
            flex-direction: column; align-items: center; justify-content: center; margin: 0 auto;
        }

        .page { display: none; padding-top: 30px; animation: fadeIn 0.5s ease-in; }
        .active-page { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .info-box { background: var(--soft-pink); border-radius: 15px; padding: 20px; border-left: 6px solid var(--deep-pink); margin-bottom: 15px; }
        .btn-medora { background-color: var(--deep-pink); color: white; border-radius: 50px; padding: 12px 30px; border: none; font-weight: 600; }
        .btn-medora:hover { background-color: var(--medora-sage); color: white; }
        
        #chat-window { height: 350px; overflow-y: auto; background: #fffafb; border: 1px solid var(--soft-pink); padding: 15px; border-radius: 10px; }
        .journal-entry { 
            background: #fff; border-left: 4px solid var(--medora-sage); 
            padding: 10px; margin-bottom: 10px; border-radius: 5px; 
            display: flex; justify-content: space-between; align-items: flex-start;
        }

        .pulse-emergency {
            background: #ff1744 !important;
            animation: pulse-red 2s infinite;
            border: none;
            color: white;
            font-weight: bold;
        }
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(255, 23, 68, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 23, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 23, 68, 0); }
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand fw-bold" style="font-size: 28px; display: flex; align-items: center;">
            MEDORA
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav ms-auto">
                <a class="nav-link" onclick="showPage('home')">Home</a>
                <a class="nav-link" onclick="showPage('profile')">Profile</a>
                <a class="nav-link" onclick="showPage('diagnostic')">Diagnosis</a>
                <a class="nav-link" onclick="showPage('tracker')">Period Tracker</a>
                <a class="nav-link" onclick="showPage('consult')">Consult</a>
                <a class="nav-link" onclick="showPage('activity')">Activity</a>
                <a class="nav-link" onclick="showPage('journal')">Journal</a>
                <a class="nav-link" onclick="showPage('alarm')">Alarms</a>
                <a class="nav-link" onclick="showPage('wellness')">My Plan</a>
                <a class="nav-link" onclick="showPage('chatbot')">Mora AI</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">

    <section id="home" class="page active-page text-center">
        <div class="py-5">
            <h1 class="display-3">Welcome to MEDORA.</h1>
            <p class="lead mt-3">A holistic ecosystem designed to unify your physical and mental well-being.</p>
            <p class="mb-4" style="max-width: 700px; margin: 0 auto;">
                We replace fragmented health apps with one intelligent platform. Track your <strong>menstrual cycle</strong>, 
                monitor <strong>PCOD/PCOS symptoms</strong>, and manage your <strong>lifestyle habits</strong>.
            </p>
            <button class="btn btn-medora mt-3" onclick="showPage('diagnostic')">Take Health Assessment</button>
            <button class="btn btn-outline-danger rounded-pill mt-3 ms-2" onclick="showPage('tracker')">Track Period</button>
        </div>
    </section>

    <section id="consult" class="page">
        <div class="container">
            <h3 class="text-center mb-2">Emergency Consultation</h3>
            <p class="text-center text-danger mb-4"><strong>Verified Medical Board</strong></p>
            
            <div class="row g-4 justify-content-center">
                <div class="col-md-5">
                    <div class="medora-card text-center">
                        <h4>Dr. Satyam Singh <span style="font-size: 14px;">‚úîÔ∏è</span></h4>
                        <p class="text-muted mb-1"><strong>MBBS</strong></p>
                        <p class="small text-muted mb-3">Medical Consultant</p>
                        <div class="d-grid gap-2">
                            <a href="tel:9852885888" class="btn btn-medora pulse-emergency">üìû Emergency Call</a>
                            <a href="https://meet.google.com/new" target="_blank" class="btn btn-outline-primary rounded-pill">üìπ Video Appointment</a>
                        </div>
                    </div>
                </div>

                <div class="col-md-5">
                    <div class="medora-card text-center">
                        <h4>Dr. Vidushi Kulshrestha <span style="font-size: 14px;">‚úîÔ∏è</span></h4>
                        <p class="text-muted mb-1"><strong>MBBS | Professor, AIIMS Delhi</strong></p>
                        <p class="small text-muted mb-3">Hormonal Health Specialist</p>
                        <div class="d-grid gap-2">
                            <a href="tel:9511533570" class="btn btn-medora pulse-emergency">üìû Emergency Call</a>
                            <a href="https://meet.google.com/new" target="_blank" class="btn btn-outline-primary rounded-pill">üìπ Video Appointment</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-box mt-4 text-center">
                <h5>Need a Clinical Summary?</h5>
                <p class="small">Export your logged symptoms and data into a structured report for your offline doctor visit.</p>
                <button class="btn btn-medora btn-sm" onclick="generateReport()">Generate Medical Report</button>
            </div>
        </div>
    </section>

    <section id="profile" class="page">
        <div class="medora-card mx-auto text-center" style="max-width: 500px;">
            <h3>User Profile</h3>
            <img id="profile-img" src="https://via.placeholder.com/150" class="rounded-circle mb-3" style="width:120px; height:120px; object-fit:cover; border: 4px solid var(--soft-pink);">
            <input type="file" class="form-control mb-3" onchange="previewImage(event)">
            <input type="text" id="p-name" class="form-control mb-2" placeholder="Full Name">
            <div class="row g-2 mb-3">
                <div class="col-6"><input type="number" id="p-weight" class="form-control" placeholder="Weight (kg)"></div>
                <div class="col-6"><input type="number" id="p-height" class="form-control" placeholder="Height (cm)"></div>
            </div>
            
            <h5 class="mt-4" style="color: var(--medora-blue);">Support Sync Setup</h5>
            <p class="small text-muted">Choose who helps you during your cycle</p>
            <select id="p-support-type" class="form-select mb-2">
                <option value="Partner">Partner Connection</option>
                <option value="Caregiver">Trusted Member (Caregiver)</option>
            </select>
            <input type="text" id="p-support-name" class="form-control mb-2" placeholder="Support Member Name">
            <input type="tel" id="p-support-phone" class="form-control mb-3" placeholder="Phone Number (with Country Code)">
            
            <button class="btn btn-medora w-100" onclick="saveProfile()">Save Profile & Sync</button>
            <div id="bmi-display" class="mt-3 fw-bold h5"></div>
        </div>
    </section>

    <section id="diagnostic" class="page">
        <div class="medora-card">
            <h3>Health & Lifestyle Assessment</h3>
            <p>We analyze your diet, habits, and symptoms to detect PCOD/PCOS risks.</p>
            <div class="row mt-4">
                <div class="col-md-6">
                    <h5 style="color: var(--medora-sage);">Physical Symptoms</h5>
                    <input type="checkbox" class="diag" data-val="2"> Irregular or Missed Periods<br>
                    <input type="checkbox" class="diag" data-val="2"> Excess Facial/Body Hair<br>
                    <input type="checkbox" class="diag" data-val="1"> Sudden Weight Gain<br>
                    <input type="checkbox" class="diag" data-val="1"> Severe/Cystic Acne<br>
                    <input type="checkbox" class="diag" data-val="1"> Pelvic Pain during cycle<br>
                </div>
                <div class="col-md-6">
                    <h5 style="color: var(--medora-sage);">Lifestyle & Food Habits</h5>
                    <input type="checkbox" class="diag" data-val="1"> High intake of sugar/junk food<br>
                    <input type="checkbox" class="diag" data-val="1"> High daily stress levels<br>
                    <input type="checkbox" class="diag" data-val="1"> Sleep less than 6 hours<br>
                    <input type="checkbox" class="diag" data-val="1"> Sedentary (No exercise)<br>
                    <input type="checkbox" class="diag" data-val="1"> Frequent bloating/gut issues<br>
                </div>
            </div>
            <button class="btn btn-medora mt-4 w-100" onclick="runDiagnosis()">Analyze My Risk</button>
            <div id="diag-res" class="mt-4 p-3 rounded text-center h5 fw-bold"></div>
        </div>
    </section>

    <section id="tracker" class="page">
        <div class="medora-card mx-auto" style="max-width: 500px;">
            <h3>Period Tracker</h3>
            <p>Predict your next cycle based on your history.</p>
            <label class="mt-2">Last Period Start Date:</label>
            <input type="date" id="cycle-start" class="form-control mb-3">
            <label>Avg. Cycle Length (Days):</label>
            <input type="number" id="cycle-len" class="form-control mb-3" value="28">
            <button class="btn btn-medora w-100" onclick="predictPeriod()">Predict Next Period</button>
            <div id="period-res" class="mt-3 text-center h5 text-success"></div>
            <hr>
            <button class="btn btn-outline-primary w-100" onclick="sendSupportUpdate('milestone')">Sync Forecast with Support Member</button>
        </div>
    </section>

    <section id="activity" class="page">
        <div class="row text-center">
            <div class="col-md-6">
                <div class="medora-card">
                    <h4>Hydration</h4>
                    <div class="tracker-circle my-3" style="border-color: var(--medora-blue);">
                        <span id="water-count" class="h2 mb-0">0</span>
                        <small>Glasses</small>
                    </div>
                    <button class="btn btn-outline-primary rounded-pill" onclick="updateWater()">+ Add Glass</button>
                </div>
            </div>
            <div class="col-md-6">
                <div class="medora-card">
                    <h4>Step Count</h4>
                    <div class="tracker-circle my-3" style="border-color: var(--medora-sage);">
                        <span id="step-count" class="h2 mb-0">0</span>
                        <small>Steps</small>
                    </div>
                    <input type="number" id="step-input" class="form-control mb-2 text-center" placeholder="Manual Entry">
                    <button class="btn btn-outline-success rounded-pill" onclick="updateSteps()">Log Activity</button>
                </div>
            </div>
        </div>
    </section>

    <section id="journal" class="page">
        <div class="medora-card mx-auto" style="max-width: 600px;">
            <h3>Mental Wellness Journal</h3>
            <textarea id="journal-input" class="form-control mb-3" rows="4" placeholder="How are you feeling today?"></textarea>
            <button class="btn btn-medora w-100" onclick="saveJournalEntry()">Save Entry</button>
            <h5 class="mt-4 border-bottom pb-2">Past Entries</h5>
            <div id="journal-list" class="mt-2" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
    </section>

    <section id="alarm" class="page">
        <div class="medora-card mx-auto" style="max-width: 500px;">
            <h3>Wellness Alarms</h3>
            <input type="text" id="alarm-msg" class="form-control mb-2" placeholder="Reminder (e.g., Drink Water)">
            <input type="time" id="alarm-time" class="form-control mb-3">
            <button class="btn btn-medora w-100" onclick="setAlarm()">Set Reminder</button>
            <div class="mt-4">
                <h5>Active Alarms:</h5>
                <ul id="alarm-list" class="list-group"></ul>
            </div>
        </div>
    </section>

    <section id="wellness" class="page">
        <div class="medora-card">
            <h2>Personalized Wellness Path</h2>
            <div id="wellness-output">
                <p class="text-muted">Please complete the <strong>Diagnosis</strong> tab first to generate your plan.</p>
            </div>
        </div>
    </section>

    <section id="chatbot" class="page">
        <div class="medora-card mx-auto" style="max-width: 600px;">
            <h3>Mora AI Assistant</h3>
            <div id="chat-window" class="mb-3">
                <div><strong>Mora:</strong> Hello love! How can I help you today?</div>
            </div>
            <div class="d-flex gap-2">
                <input type="text" id="chat-input" class="form-control" placeholder="Talk to me...">
                <button class="btn btn-medora" onclick="askMora()">Send</button>
            </div>
        </div>
    </section>

</div>

<script>
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
        if(id === 'wellness') generateWellness();
        if(id === 'journal') loadJournalEntries();
    }

    function previewImage(e) {
        const reader = new FileReader();
        reader.onload = () => document.getElementById('profile-img').src = reader.result;
        reader.readAsDataURL(e.target.files[0]);
    }

    function saveProfile() {
        const h = document.getElementById('p-height').value / 100;
        const w = document.getElementById('p-weight').value;
        const name = document.getElementById('p-name').value;
        
        localStorage.setItem('med_name', name);
        localStorage.setItem('support_type', document.getElementById('p-support-type').value);
        localStorage.setItem('support_name', document.getElementById('p-support-name').value);
        localStorage.setItem('support_phone', document.getElementById('p-support-phone').value);

        if(h > 0 && w > 0) {
            const bmi = (w / (h*h)).toFixed(1);
            localStorage.setItem('med_bmi', bmi);
            document.getElementById('bmi-display').innerText = `Your BMI: ${bmi}`;
            alert("Profile & Support Sync Saved!");
        }
    }

    function predictPeriod() {
        const startInput = document.getElementById('cycle-start').value;
        const start = new Date(startInput);
        const len = parseInt(document.getElementById('cycle-len').value);
        if(!isNaN(start.getTime())) {
            const next = new Date(start);
            next.setDate(start.getDate() + len);
            document.getElementById('period-res').innerText = "Expected Start: " + next.toDateString();
            localStorage.setItem('last_period_start', startInput);
        }
    }

    function sendSupportUpdate(type) {
        const sType = localStorage.getItem('support_type') || "Support Member";
        const sName = localStorage.getItem('support_name') || "Partner";
        const sPhone = localStorage.getItem('support_phone');
        const userName = localStorage.getItem('med_name') || "Your user";

        if(!sPhone) {
            alert("Please set up a Support Member number in the Profile first!");
            return;
        }

        let message = "";
        if(type === 'milestone') {
            if(sType === 'Partner') {
                message = `Hi ${sName}, this is Medora. Just a heads up that ${userName}'s cycle is expected to start soon. She might need some extra chocolate or cuddles today! ‚ú®`;
            } else {
                message = `Hello ${sName}, this is a Medora Wellness update for ${userName}. Her cycle is predicted to start soon. Please check if she needs any essentials or extra rest.`;
            }
        } else if(type === 'emergency') {
            message = `ALERT: ${userName} is logging severe period pain on Medora. Please check in on her immediately.`;
        }

        const whatsappUrl = `https://wa.me/${sPhone}?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');
    }

    function runDiagnosis() {
        let score = 0;
        document.querySelectorAll('.diag:checked').forEach(c => score += parseInt(c.dataset.val));
        const display = document.getElementById('diag-res');
        let riskLevel = "Low Risk (Healthy)";
        let color = "green";
        if(score >= 6) { 
            riskLevel = "High Risk (PCOS Indicators Present)"; color = "#d9534f"; 
            if(confirm("High risk detected. Would you like to alert your Support Member?")) sendSupportUpdate('emergency');
        }
        else if(score >= 3) { riskLevel = "Moderate Risk (PCOD Focus)"; color = "#f0ad4e"; }
        localStorage.setItem('med_risk', riskLevel);
        display.innerText = "Assessment Result: " + riskLevel;
        display.style.color = color;
        display.style.border = "2px solid " + color;
    }

    function generateWellness() {
        const risk = localStorage.getItem('med_risk') || "Low Risk";
        const container = document.getElementById('wellness-output');
        let diet = "Balanced Whole Foods: Focus on lean proteins, complex carbs, and hydration.";
        let exercise = "General Fitness: 30 minutes of moderate activity daily.";
        if(risk.includes("High") || risk.includes("Moderate")) {
            diet = "Anti-Inflammatory & Low-GI: Eliminate sugary drinks and processed snacks. Eat oats, leafy greens, and fatty fish.";
            exercise = "Metabolic Focus: Combine Strength Training (to burn glucose) with Yoga (to lower cortisol).";
        }
        container.innerHTML = `
            <div class="info-box"><h5>Your Risk Level: ${risk}</h5></div>
            <div class="info-box" style="border-color: var(--medora-sage);">
                <h5>Recommended Diet</h5><p>${diet}</p>
            </div>
            <div class="info-box" style="border-color: var(--medora-blue);">
                <h5>Recommended Exercise</h5><p>${exercise}</p>
            </div>
        `;
    }

    function updateWater() { document.getElementById('water-count').innerText = parseInt(document.getElementById('water-count').innerText) + 1; }
    function updateSteps() { document.getElementById('step-count').innerText = document.getElementById('step-input').value; }

    function saveJournalEntry() {
        const text = document.getElementById('journal-input').value;
        if(!text.trim()) return;
        const entries = JSON.parse(localStorage.getItem('med_journal') || "[]");
        entries.push({ id: Date.now(), date: new Date().toLocaleString(), text: text });
        localStorage.setItem('med_journal', JSON.stringify(entries));
        document.getElementById('journal-input').value = "";
        loadJournalEntries();
    }

    function deleteJournalEntry(id) {
        if(confirm("Are you sure you want to delete this entry?")) {
            let entries = JSON.parse(localStorage.getItem('med_journal') || "[]");
            entries = entries.filter(e => e.id !== id);
            localStorage.setItem('med_journal', JSON.stringify(entries));
            loadJournalEntries();
        }
    }

    function loadJournalEntries() {
        const entries = JSON.parse(localStorage.getItem('med_journal') || "[]");
        const list = document.getElementById('journal-list');
        list.innerHTML = "";
        [...entries].reverse().forEach(e => {
            list.innerHTML += `
                <div class="journal-entry">
                    <div>
                        <small class="text-muted">${e.date}</small>
                        <p class="mb-0">${e.text}</p>
                    </div>
                    <button class="btn btn-sm text-danger" onclick="deleteJournalEntry(${e.id})">Delete</button>
                </div>`;
        });
    }

    function setAlarm() {
        const msg = document.getElementById('alarm-msg').value;
        const time = document.getElementById('alarm-time').value;
        if(msg && time) alert(`Reminder set: ${msg} at ${time}`);
    }

    function askMora() {
        const input = document.getElementById('chat-input');
        const box = document.getElementById('chat-window');
        const text = input.value.toLowerCase();
        if(!text.trim()) return;

        box.innerHTML += `<div class="text-end mb-2"><strong>You:</strong> ${input.value}</div>`;
        let reply = "I'm listening. Tell me more about how you're feeling.";

        if(text.includes("hi") || text.includes("hello")) {
            reply = "Hey love, are you feeling okay right now? How bad does the pain feel?";
        }
        else if(text.includes("bad") || text.includes("intense") || text.includes("kill")) {
            reply = "If the pain feels intense, try lying on your side with a warm hot-water bag on your lower abdomen. Should I sync an alert to your support member?";
        }
        else if(text.includes("pain") || text.includes("cramp") || text.includes("hurt")) {
             reply = "Would you say the cramps are mild, moderate, or really painful today?";
        }
        else if(text.includes("tired") || text.includes("drain") || text.includes("exhaust")) {
            reply = "It‚Äôs completely okay to rest today. Short naps and staying hydrated can help.";
        }
        else if(text.includes("pcos") || text.includes("pcod")) {
            reply = "PCOS and PCOD are hormonal conditions. The best approach is a low-sugar diet and consistent physical activity.";
        }

        setTimeout(() => {
            box.innerHTML += `<div><strong>Mora:</strong> ${reply}</div>`;
            box.scrollTop = box.scrollHeight;
        }, 500);
        input.value = "";
    }

    function generateReport() {
        const name = localStorage.getItem('med_name') || "Patient";
        const bmi = localStorage.getItem('med_bmi') || "N/A";
        const risk = localStorage.getItem('med_risk') || "Not Screened";
        const water = document.getElementById('water-count').innerText;
        const report = `-----------------------------\nMEDORA CLINICAL SUMMARY\n-----------------------------\nPatient Name: ${name}\nBMI Index: ${bmi}\nPCOS Risk Level: ${risk}\nAvg Daily Hydration: ${water} glasses\n-----------------------------\nGenerated on: ${new Date().toLocaleDateString()}`;
        alert("Report Generated!\n" + report);
    }
</script>
</body>
</html>